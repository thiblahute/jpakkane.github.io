<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Syntax</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/prism.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/trie.js"></script>

<title>The MesonÂ® Build System</title>
<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form action="" class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home" id="home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Modules <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="Gnome-module.html">GNOME</a>
			</li>
					<li>
				<a href="i18n-module.html">i18n</a>
			</li>
					<li>
				<a href="Pkgconfig-module.html">Pkgconfig</a>
			</li>
					<li>
				<a href="Python-3-module.html">Python 3</a>
			</li>
					<li>
				<a href="Qt4-module.html">Qt4</a>
			</li>
					<li>
				<a href="Qt5-module.html">Qt5</a>
			</li>
					<li>
				<a href="RPM-module.html">RPM</a>
			</li>
					<li>
				<a href="Windows-module.html">Windows</a>
			</li>
			</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Quick References <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">Functions</a>
			</li>
					<li>
				<a href="Build-options.html">Options</a>
			</li>
					<li>
				<a href="Configuration.html">Configuration</a>
			</li>
					<li>
				<a href="Dependencies.html">Dependencies</a>
			</li>
					<li>
				<a href="Unit-tests.html">Tests</a>
			</li>
					<li>
				<a href="Syntax.html">Syntax</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>The Meson Build System</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation-1.0" data-hotdoc-ref="Syntax.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
			<script src="assets/js/sitemap.js"></script>
	</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="Syntax.md" data-hotdoc-role="main">
        <h1 id="syntax">Syntax</h1>
<p>The syntax of Meson's specification language has been kept as simple as possible. It is <em>strongly typed</em> so no object is ever converted to another under the covers. Variables have no visible type which makes Meson <em>dynamically typed</em> (also known as <em>duck typed</em>).</p>
<p>The main building blocks of the language are <em>variables</em>, <em>numbers</em>, <em>booleans</em>, <em>strings</em>, <em>arrays</em>, <em>function calls</em>, <em>method calls</em>, <em>if statements</em> and <em>includes</em>.</p>
<p>Usually one Meson statement takes just one line. There is no way to have multiple statements on one line as in e.g. <em>C</em>. Function and method calls' argument lists can be split over multiple lines. Meson will autodetect this case and do the right thing. In other cases you can get multi-line statements by ending the line with a <code>\</code>. Apart from line ending whitespace has no syntactic meaning.</p>
<h2 id="variables">Variables</h2>
<p>Variables in Meson work just like in other high level programming languages. A variable can contain a value of any type, such as an integer or a string. Variables don't need to be predeclared, you can just assign to them and they appear. Here's how you would assign values to two different variables.</p>
<pre><code class="language-meson">var1 = 'hello'
var2 = 102
</code></pre>
<p>One important difference in how variables work in Meson is that all variables are immutable. This is different from, for example, how Python works.</p>
<pre><code class="language-meson">var1 = [1, 2, 3]
var2 = var1
var2 += [4]
# var2 is now [1, 2, 3, 4]
# var1 is still [1, 2, 3]
</code></pre>
<h2 id="numbers">Numbers</h2>
<p>Meson supports only integer numbers. They are declared simply by writing them out. Basic arithmetic operations are supported.</p>
<pre><code class="language-meson">x = 1 + 2
y = 3 * 4
d = 5 % 3 # Yields 2.
</code></pre>
<p>Strings can be converted to a number like this:</p>
<pre><code class="language-meson">string_var = '42'
num = var1.to_int()
</code></pre>
<h2 id="booleans">Booleans</h2>
<p>A boolean is either <code>true</code> or <code>false</code>.</p>
<pre><code class="language-meson">truth = true
</code></pre>
<h2 id="strings">Strings</h2>
<p>Strings in Meson are declared with single quotes. To enter a literal single quote do it like this:</p>
<pre><code class="language-meson">single quote = 'contains a \' character'
</code></pre>
<p>Similarly <code>\n</code> gets converted to a newline and <code>\\\\</code> to a single backslash.</p>
<h4 id="string-concatenation">String concatenation</h4>
<p>Strings can be concatenated to form a new string using the <code>+</code> symbol.</p>
<pre><code class="language-meson">str1 = 'abc'
str2 = 'xyz'
combined = str1 + '_' + str2 # combined is now abc_xyz
</code></pre>
<h4 id="strings-running-over-multiple-lines">Strings running over multiple lines</h4>
<p>Strings running over multiple lines can be declared with three single quotes, like this:</p>
<pre><code class="language-meson">multiline_string = '''#include &lt;foo.h&gt;
int main (int argc, char ** argv) {
  return FOO_SUCCESS;
}'''
</code></pre>
<p>This can also be combined with the string formatting functionality described below.</p>
<h4 id="string-formatting">String formatting</h4>
<p>Strings can be built using the string formatting functionality.</p>
<pre><code class="language-meson">template = 'string: @0@, number: @1@, bool: @2@'
res = template.format('text', 1, true)
# res now has value 'string: text, number: 1, bool: true'
</code></pre>
<p>As can be seen, the formatting works by replacing placeholders of type <code>@number@</code> with the corresponding argument.</p>
<h4 id="string-methods">String methods</h4>
<p>Strings also support a number of other methods that return transformed copies.</p>
<p><strong>.strip()</strong></p>
<pre><code class="language-meson"># Similar to the Python str.strip(). Removes leading/ending spaces and newlines
define = ' -Dsomedefine '
stripped_define = define.strip()
# 'stripped_define' now has the value '-Dsomedefine'
</code></pre>
<p><strong>.to_upper()</strong>, <strong>.to_lower()</strong></p>
<pre><code class="language-meson">target = 'x86_FreeBSD'
upper = target.to_upper() # t now has the value 'X86_FREEBSD'
lower = target.to_lower() # t now has the value 'x86_freebsd'
</code></pre>
<p><strong>.to_int()</strong></p>
<pre><code class="language-meson">version = '1'
# Converts the string to an int and throws an error if it can't be
ver_int = version.to_int()
</code></pre>
<p><strong>.contains()</strong>, <strong>.startswith()</strong>, <strong>.endswith()</strong></p>
<pre><code class="language-meson">target = 'x86_FreeBSD'
is_fbsd = target.to_lower().contains('freebsd')
# is_fbsd now has the boolean value 'true'
is_x86 = target.startswith('x86') # boolean value 'true'
is_bsd = target.to_lower().endswith('bsd') # boolean value 'true'
</code></pre>
<p><strong>.split()</strong>, <strong>.join()</strong></p>
<pre><code class="language-meson"># Similar to the Python str.split()
components = 'a b   c d '.split()
# components now has the value ['a', 'b', 'c', 'd']
components = 'a b   c d '.split(' ')
# components now has the value ['a', 'b', '', '', 'c', 'd', '']

# Similar to the Python str.join()
output = ' '.join(['foo', 'bar'])
# Output value is 'foo bar'
pathsep = ':'
path = pathsep.join(['/usr/bin', '/bin', '/usr/local/bin'])
# path now has the value '/usr/bin:/bin:/usr/local/bin'

# For joining paths, you should use join_paths()
# This has the advantage of being cross-platform
path = join_paths(['/usr', 'local', 'bin'])
# path now has the value '/usr/local/bin'

# Example to set an API version for use in library(), install_header(), etc
project('project', 'c', version: '0.2.3')
version_array = meson.project_version().split('.')
# version_array now has the value ['0', '2', '3']
api_version = '.'.join([version_array[0], version_array[1]])
# api_version now has the value '0.2'

# We can do the same with .format() too:
api_version = '@0@.@1@'.format(version_array[0], version_array[1])
# api_version now (again) has the value '0.2'
</code></pre>
<p><strong>.underscorify()</strong></p>
<pre><code class="language-meson">name = 'Meson Docs.txt#Reference-manual'
# Replaces all characters other than `a-zA-Z0-9` with `_` (underscore)
# Useful for substituting into #defines, filenames, etc.
underscored = name.underscorify()
# underscored now has the value 'Meson_Docs_txt_Reference_manual'
</code></pre>
<p><strong>.version_compare()</strong></p>
<pre><code class="language-meson">version = '1.2.3'
# Compare version numbers semantically
is_new = version.version_compare('&gt;=2.0')
# is_new now has the boolean value false
# Supports the following operators: '&gt;', '&lt;', '&gt;=', '&lt;=', '!=', '==', '='
</code></pre>
<h2 id="arrays">Arrays</h2>
<p>Arrays are delimited by brackets. An array can contain an arbitrary number of objects of any type.</p>
<pre><code class="language-meson">my_array = [1, 2, 'string', some_obj]
</code></pre>
<p>Accessing elements of an array can be done via array indexing:</p>
<pre><code class="language-meson">my_array = [1, 2, 'string', some_obj]
second_element = my_array[1]
last_element = my_array[-1]
</code></pre>
<p>You can add more items to an array like this:</p>
<pre><code class="language-meson">my_array += ['foo', 3, 4, another_obj]
</code></pre>
<p>When adding a single item, you do not need to enclose it in an array:</p>
<pre><code class="language-meson">my_array += ['something']
# This also works
my_array += 'else'
</code></pre>
<p>Note appending to an array will always create a new array object and assign it to <code>my_array</code> instead of modifying the original since all objects in Meson are immutable.</p>
<h4 id="array-methods">Array methods</h4>
<p>The following methods are defined for all arrays:</p>
<ul>
<li>
<code>length</code>, the size of the array</li>
<li>
<code>contains</code>, returns <code>true</code> if the array contains the object given as argument, <code>false</code> otherwise</li>
<li>
<code>get</code>, returns the object at the given index, negative indices count from the back of the array, indexing out of bounds is a fatal error. Provided for backwards-compatibility, it is identical to array indexing.</li>
</ul>
<h2 id="function-calls">Function calls</h2>
<p>Meson provides a set of usable functions. The most common use case is creating build objects.</p>
<pre><code class="language-meson">executable('progname', 'prog.c')
</code></pre>
<h2 id="method-calls">Method calls</h2>
<p>Objects can have methods, which are called with the dot operator. The exact methods it provides depends on the object.</p>
<pre><code class="language-meson">myobj = some_function()
myobj.do_something('now')
</code></pre>
<h2 id="if-statements">If statements</h2>
<p>If statements work just like in other languages.</p>
<pre><code class="language-meson">var1 = 1
var2 = 2
if var1 == var2 # Evaluates to false
  something_broke()
elif var3 == var2
  something_else_broke()
else
  everything_ok()
endif

opt = get_option('someoption')
if opt == 'foo'
  do_something()
endif
</code></pre>
<h2 id="foreach-statements">Foreach statements</h2>
<p>To do an operation on all elements of an array, use the <code>foreach</code> command. As an example, here's how you would define two executables with corresponding tests.</p>
<pre><code class="language-meson">progs = [['prog1', ['prog1.c', 'foo.c']],
         ['prog2', ['prog2.c', 'bar.c']]]

foreach p : progs
  exe = executable(p[0], p[1])
  test(p[0], exe)
endforeach
</code></pre>
<p>Note that Meson variables are immutable. Trying to assign a new value to <code>progs</code> inside a foreach loop will not affect foreach's control flow.</p>
<h2 id="logical-operations">Logical operations</h2>
<p>Meson has the standard range of logical operations.</p>
<pre><code class="language-meson">if a and b
  # do something
endif
if c or d
  # do something
endif
if not e
  # do something
endif
if not (f or g)
  # do something
endif
</code></pre>
<p>Logical operations work only on boolean values.</p>
<h2 id="comments">Comments</h2>
<p>A comment starts with the <code>#</code> character and extends until the end of the line.</p>
<pre><code class="language-meson">some_function() # This is a comment
some_other_function()
</code></pre>
<h2 id="ternary-operator">Ternary operator</h2>
<p>The ternary operator works just like in other languages.</p>
<pre><code class="language-meson">x = condition ? true_value : false_value
</code></pre>
<p>The only exception is that nested ternary operators are forbidden to improve legibility. If your branching needs are more complex than this you need to write an <code>if/else</code> construct.</p>
<h2 id="includes">Includes</h2>
<p>Most source trees have multiple subdirectories to process. These can be handled by Meson's <code>subdir</code> command. It changes to the given subdirectory and executes the contents of <code>meson.build</code> in that subdirectory. All state (variables etc) are passed to and from the subdirectory. The effect is roughly the same as if the contents of the subdirectory's Meson file would have been written where the include command is.</p>
<pre><code class="language-meson">test_data_dir = 'data'
subdir('tests')
</code></pre>
<h2 id="userdefined-functions-and-methods">User-defined functions and methods</h2>
<p>Meson does not currently support user-defined functions or methods. The addition of user-defined functions would make Meson Turing-complete which would make it harder to reason about and more difficult to integrate with tools like IDEs. More details about this are <a href="FAQ.html#why-is-meson-not-just-a-python-module-so-i-could-code-my-build-setup-in-python">in the FAQ</a>. If because of this limitation you find yourself copying and pasting code a lot you may be able to use a <a href="#foreach-statements"><code>foreach</code> loop instead</a>.</p>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<hr>
	<div id="footer">
		    
        
<hr>

<div class="license-description">
    Website licensing information are available on the <a href="legal.html">Legal</a> page.
</div>


	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		<a href="https://github.com/mesonbuild/meson//edit/master/docs/markdown/Syntax.md" data-hotdoc-role="edit-button">Edit on github</a>

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>

</body>

<script src="assets/js/navbar_offset_scroller.js"></script>
</html>
